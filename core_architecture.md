# Agno 핵심 아키텍처

Agno는 모듈식으로 설계되어 개발자가 필요에 따라 다양한 기능을 조합하여 강력한 에이전트 시스템을 구축할 수 있도록 지원합니다. 이 문서에서는 Agno의 핵심 아키텍처, 주요 컴포넌트 및 상호작용 방식에 대해 설명합니다.

## `libs/agno/agno` 디렉토리 구조 분석

Agno의 핵심 로직은 `libs/agno/agno` 디렉토리 내에 구성되어 있습니다. 주요 하위 디렉토리와 역할은 다음과 같습니다.

*   **`agent/`**: Agno의 기본 작업 단위인 에이전트의 정의, 실행 로직 및 관련 메트릭을 포함합니다.
*   **`api/`**: Agno 에이전트 및 관련 기능을 외부 애플리케이션에서 사용할 수 있도록 FastAPI 기반의 API 라우트 및 스키마를 제공합니다.
*   **`app/`**: Agno 애플리케이션 (예: Playground, Slack 연동)을 구축하기 위한 구성 요소와 라우터를 포함합니다.
*   **`cli/`**: Agno 프로젝트 관리, 배포, 인증 등을 위한 커맨드 라인 인터페이스 도구를 제공합니다.
*   **`document/`**: 다양한 형식의 문서를 로드하고 청크로 분할하는 기능을 담당합니다. (RAG의 일부)
*   **`embedder/`**: 텍스트 데이터를 벡터 임베딩으로 변환하는 다양한 임베딩 모델 인터페이스를 제공합니다. (RAG의 일부)
*   **`eval/`**: 에이전트의 정확도, 성능, 안정성 등을 평가하는 도구를 포함합니다.
*   **`knowledge/`**: 에이전트가 외부 지식 소스를 활용할 수 있도록 RAG (검색 증강 생성) 관련 기능을 통합합니다. 다양한 데이터 소스 (URL, PDF, CSV 등) 및 벡터 데이터베이스 연동을 지원합니다.
*   **`memory/`**: 에이전트의 대화 기록, 작업 이력 등 단기 및 장기 기억을 관리하는 기능을 제공합니다. 다양한 데이터베이스 백엔드를 지원합니다.
*   **`models/`**: 다양한 LLM (Large Language Model) 제공업체의 모델을 일관된 인터페이스로 사용할 수 있도록 추상화 계층을 제공합니다. (예: OpenAI, Anthropic, Google Gemini 등)
*   **`reasoning/`**: 에이전트가 복잡한 문제 해결을 위해 단계별 사고 과정을 수행할 수 있도록 지원하는 추론 엔진 및 관련 도구를 포함합니다.
*   **`storage/`**: 에이전트의 상태, 메모리, 설정 등을 영구적으로 저장하기 위한 다양한 스토리지 옵션 (JSON, YAML, 데이터베이스 등)을 제공합니다.
*   **`team/`**: 여러 에이전트가 협력하여 공동의 목표를 달성하도록 지원하는 '에이전트 팀' 기능을 제공합니다.
*   **`tools/`**: 에이전트가 외부 세계와 상호작용하거나 특정 작업을 수행할 수 있도록 다양한 도구 (예: 웹 검색, 파일 시스템 접근, API 호출)를 제공하고, 사용자 정의 도구를 통합할 수 있는 인터페이스를 제공합니다.
*   **`vectordb/`**: RAG 파이프라인에서 사용되는 다양한 벡터 데이터베이스 (예: Chroma, Pinecone, Milvus)와의 연동을 지원합니다.
*   **`workflow/`**: 여러 에이전트 또는 팀의 작업을 순차적 또는 병렬적으로 연결하여 자동화된 프로세스를 정의하고 실행하는 워크플로우 기능을 제공합니다.

## Agent, Team, Workflow의 개념 및 상호작용 방식

Agno의 핵심 구성 요소는 Agent, Team, Workflow이며, 이들은 계층적인 구조로 상호작용하여 복잡한 작업을 수행합니다.

*   **Agent**:
    *   Agno에서 가장 기본적인 작업 수행 단위입니다.
    *   특정 **역할(role)**과 **목표(goal)**를 가지며, 이를 달성하기 위해 할당된 **도구(tools)**를 사용합니다.
    *   필요에 따라 **지식(knowledge)** 베이스를 참조하여 정보를 얻고, **메모리(memory)**를 통해 이전 상호작용 및 작업 결과를 기억합니다.
    *   주어진 **지시사항(instructions)**에 따라 작업을 수행하며, 복잡한 문제 해결을 위해 **추론(reasoning)** 과정을 거칠 수 있습니다.

*   **Team**:
    *   여러 에이전트가 협력하여 단일 에이전트로는 처리하기 어려운 복잡한 작업을 수행하는 그룹입니다.
    *   팀은 일반적으로 특정 작업을 전문으로 하는 여러 **멤버 에이전트(member agents)**와 이들의 작업을 조율하고 최종 응답을 종합하는 **조정자 모델(coordinator model)** 또는 **리더 에이전트(leader agent)**로 구성될 수 있습니다.
    *   멤버 에이전트들은 각자의 전문 분야에 맞는 도구와 지식을 활용하며, 팀 전체의 목표 달성을 위해 협력합니다.
    *   `README.md`에서 언급된 것처럼, 에이전트가 사용해야 할 도구가 너무 많아지거나 여러 개념을 다뤄야 할 때 팀을 사용하여 부하를 분산시킬 수 있습니다.

*   **Workflow**:
    *   여러 에이전트 또는 팀의 작업을 특정 순서나 조건에 따라 연결하여 자동화된 프로세스를 정의하고 실행하는 메커니즘입니다.
    *   워크플로우는 작업의 흐름, 데이터 전달 방식, 조건부 실행 등을 정의하여 복잡한 비즈니스 로직이나 데이터 처리 파이프라인을 구축할 수 있게 합니다.
    *   `README.md`에서 언급된 "상태와 결정성을 갖춘 에이전틱 워크플로우 (Agentic Workflows with state and determinism)"는 워크플로우가 각 단계의 상태를 관리하고 예측 가능한 방식으로 작업을 수행함을 시사합니다.

*   **상호작용 흐름**:
    1.  **Workflow (워크플로우)** 는 가장 상위 레벨에서 전체 작업 프로세스를 정의하고 시작합니다.
    2.  워크플로우는 정의된 순서나 조건에 따라 특정 **Team (팀)** 이나 개별 **Agent (에이전트)** 를 호출하여 작업을 위임합니다.
    3.  **Team (팀)** 이 호출되면, 팀의 조정자(coordinator)는 내부 **Member Agents (멤버 에이전트)** 들에게 작업을 분배하고, 각 에이전트의 결과를 취합하여 팀의 최종 결과를 도출합니다.
    4.  개별 **Agent (에이전트)** 는 자신의 역할과 지시에 따라 도구, 지식, 메모리, 추론 기능을 활용하여 작업을 수행하고 결과를 반환합니다.
    5.  반환된 결과는 다시 상위 호출자(팀 또는 워크플로우)에게 전달되어 다음 단계로 진행되거나 최종 결과로 처리됩니다.

## 주요 컴포넌트 상세 설명

*   **Models (`libs/agno/agno/models/`)**:
    *   Agno는 모델 무관성을 지향하며, `models` 디렉토리는 OpenAI, Anthropic, Google, Cohere 등 23개 이상의 다양한 LLM 제공사 모델에 대한 일관된 인터페이스를 제공합니다. 이를 통해 개발자는 특정 모델에 종속되지 않고 필요에 따라 모델을 쉽게 교체하거나 조합하여 사용할 수 있습니다.
    *   모델 선택 시에는 작업의 복잡성, 비용, 응답 속도, 특정 기능 지원 여부 (예: 함수 호출, 멀티모달) 등을 고려해야 합니다. Agno는 이러한 선택을 용이하게 하는 추상화 계층을 제공합니다.

*   **Tools (`libs/agno/agno/tools/`)**:
    *   에이전트가 외부 세계와 상호작용하고 특정 작업을 수행할 수 있도록 하는 기능 모듈입니다. `tools` 디렉토리에는 웹 검색(DuckDuckGo, GoogleSearch), API 연동(YFinance, Google Calendar), 파일 처리, 코드 실행 등 다양한 사전 빌드된 도구들이 포함되어 있습니다.
    *   개발자는 `Tool` 클래스를 상속하거나 데코레이터를 사용하여 자체 파이썬 함수를 쉽게 에이전트 도구로 통합할 수 있습니다. 이는 Agno의 확장성을 높여 특정 도메인이나 작업에 필요한 맞춤형 기능을 에이전트에 부여할 수 있게 합니다.

*   **Knowledge (`libs/agno/agno/knowledge/`, `document/`, `vectordb/`, `embedder/`)**:
    *   에이전트가 대규모 외부 데이터를 이해하고 활용하여 답변의 질을 높이는 RAG (검색 증강 생성) 기능을 제공합니다.
    *   **`document/`**: 다양한 소스(URL, PDF, TXT, CSV 등)로부터 문서를 로드하고, 이를 처리하기 쉬운 단위(청크)로 분할하는 역할을 합니다. (예: `libs/agno/agno/document/reader/`, `libs/agno/agno/document/chunking/`)
    *   **`embedder/`**: 로드된 문서 청크를 의미적으로 검색 가능한 벡터 임베딩으로 변환합니다. `libs/agno/agno/embedder/`에는 OpenAI, Cohere, HuggingFace 등 다양한 임베딩 모델을 위한 인터페이스가 포함되어 있습니다.
    *   **`vectordb/`**: 생성된 벡터 임베딩을 저장하고 효율적으로 검색할 수 있는 벡터 데이터베이스와의 연동을 지원합니다. `libs/agno/agno/vectordb/`에는 Chroma, Pinecone, Milvus, Weaviate 등 다양한 벡터 DB 클라이언트가 포함되어 있습니다.
    *   **`knowledge/`**: 위의 컴포넌트들을 통합하여 에이전트가 특정 질문이나 작업에 대해 관련성 높은 정보를 벡터 데이터베이스에서 검색하고, 이를 LLM의 컨텍스트에 포함시켜 보다 정확하고 정보에 기반한 답변을 생성하도록 하는 RAG 파이프라인을 구축합니다.

*   **Memory & Storage (`libs/agno/agno/memory/`, `storage/`)**:
    *   **`memory/`**: 에이전트가 이전 대화나 작업의 맥락을 이해하고 연속적인 상호작용을 가능하게 하는 기억 기능을 관리합니다. 이는 단기 기억(현재 대화의 맥락)과 장기 기억(과거 대화 요약, 사용자 프로필 등)을 포함할 수 있습니다. `memory` 모듈은 대화 기록 저장, 요약, 검색 등의 기능을 제공하며, `libs/agno/agno/memory/db/`를 통해 다양한 데이터베이스(SQLite, PostgreSQL, MongoDB 등)에 메모리를 저장할 수 있도록 지원합니다.
    *   **`storage/`**: 에이전트의 설정, 학습된 데이터, 메모리 등 다양한 데이터를 영구적으로 저장하고 관리하기 위한 인터페이스와 구현체를 제공합니다. `libs/agno/agno/storage/agent/`, `libs/agno/agno/storage/workflow/` 등에서 볼 수 있듯이, 각 컴포넌트별로 특화된 스토리지 솔루션(로컬 파일 시스템, 클라우드 스토리지, 데이터베이스 등)을 지원하여 유연성을 제공합니다.

*   **Reasoning (`libs/agno/agno/reasoning/`)**:
    *   에이전트가 단순히 정보를 검색하거나 도구를 사용하는 것을 넘어, 복잡한 문제에 대해 단계별로 사고하고 계획을 수립하여 해결책을 도출하는 추론 능력을 지원합니다.
    *   `README.md`에서 언급된 것처럼 Agno는 Reasoning 모델 활용, `ReasoningTools` 사용, 또는 사용자 정의 `chain-of-thought` 접근 방식 등 여러 추론 전략을 지원합니다.
    *   `libs/agno/agno/reasoning/` 디렉토리에는 이러한 추론 과정을 정의하고 실행하는 데 필요한 로직과 헬퍼 함수들이 포함되어 있으며, 에이전트가 어떤 도구를 어떤 순서로 사용할지, 어떤 정보를 추가로 탐색해야 할지 등을 결정하는 데 도움을 줍니다.

*   **Multi-modal**:
    *   Agno 에이전트는 텍스트뿐만 아니라 이미지, 오디오, 비디오 등 다양한 데이터 형식을 입력으로 받아 처리하고, 다양한 형식으로 출력할 수 있는 멀티모달 기능을 네이티브하게 지원합니다.
    *   이는 `README.md`에서 "Natively Multi-Modal" 기능으로 명시되어 있으며, 이를 위해 Agno는 멀티모달 입력을 처리하고, 해당 데이터를 지원하는 LLM 모델(예: GPT-4o, Gemini)과 연동하여 멀티모달 출력을 생성할 수 있는 내부 메커니즘을 갖추고 있을 것으로 예상됩니다. (구체적인 구현은 `libs/agno/agno/media.py` 또는 각 모델별 구현체 내에 있을 수 있습니다.)
